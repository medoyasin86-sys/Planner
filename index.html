<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>بلانر أ/ محمد ياسين حلمي - احترافي وشخصي</title>

  <!-- خطوط -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <!-- أيقونات -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      /* لوحة فاخرة للتبويبات */
      --ruby:#9B1C31;
      --navy:#0B1A39;
      --emerald:#0F7A5F;
      --marmoreal:#E7DCC8;
      --white:#FFFFFF;

      /* محايدة */
      --light-gray:#f6f7fb;
      --dark-gray-text:#333;
      --paper:#fff;
      --ruled-line:#e9e9e9;

      --body-font:'Cairo',sans-serif;
    }

    html,body{
      margin:0;
      padding:0;
      height:100%;
      background:var(--light-gray);
      color:var(--dark-gray-text);
      font-family:var(--body-font);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      touch-action:manipulation;
    }

    /* زر تبديل اللغة */
    .lang-btn{
      position:fixed; top:16px; inset-inline-end:18px; z-index:140;
      background: var(--navy); color:#fff; border:none; border-radius:12px;
      padding:10px 14px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,.15);
      font-weight:700; letter-spacing:.2px;
    }
    .lang-btn:hover{ filter:brightness(1.06); }

    /* ===== مظهر الكتاب المفتوح ===== */
    .planner-container{
      position: relative;
      display:flex;
      gap:0;
      max-width:1800px;
      margin:0 auto;
      padding:18px;
      align-items:stretch;
      justify-content:center;
      perspective:2200px;
    }
    .planner-page{
      flex:1;
      background:var(--paper);
      border-radius:22px;
      padding:28px;
      display:flex;
      flex-direction:column;
      min-height:900px;
      position:relative;
      overflow:hidden;
      box-shadow:
        0 10px 28px rgba(0,0,0,.12),
        inset -10px 0 18px rgba(0,0,0,.06);
      transform-origin:right center;
      transform: rotateY(-3deg);
      transition: transform .35s ease, box-shadow .35s ease;
    }
    .professional-page{
      transform-origin:left center;
      transform: rotateY(3deg);
      box-shadow:
        0 10px 28px rgba(0,0,0,.12),
        inset 10px 0 18px rgba(0,0,0,.06);
    }

    /* رأس الصفحة */
    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:18px;
      padding-bottom:14px;
      border-bottom:1px solid #eee;
    }
    .header .logo{
      font-size:2.2em;
      color:#888;
      letter-spacing:3px;
      font-weight:700;
      user-select:none;
    }
    .header .title{ flex:1; text-align:right; }
    .header h1{
      font-weight:700;
      margin:0;
      font-size:1.45em;
      color:#222;
      letter-spacing:.2px;
    }
    .header p{
      margin:6px 0 0;
      font-size:.9em;
      color:#777;
    }
    html[dir="ltr"] .header .title{ text-align:left; }
    html[dir="ltr"] .header .logo{ letter-spacing:2px; }

    /* تبويبات ملونة (ثابتة دائمًا) */
    .tabs-section{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-bottom:16px;
    }
    .tab-button{
      display:flex;
      align-items:center;
      gap:10px;
      background:#fff;
      padding:12px 16px;
      border-radius:12px;
      color:#333;
      border:1px solid #e8e8ea;
      text-decoration:none;
      cursor:pointer;
      text-align:right;
      transition:transform .15s ease, background-color .2s ease, color .2s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow:0 2px 6px rgba(0,0,0,.05);
      width:100%;
    }
    .tab-button i{ font-size:1.1em; }

    /* ألوان ثابتة للتبويب */
    .tab-ruby{ background: var(--ruby); color:#fff; border-color: var(--ruby); }
    .tab-ruby i{ color:#fff; }

    .tab-navy{ background: var(--navy); color:#fff; border-color: var(--navy); }
    .tab-navy i{ color:#fff; }

    .tab-emerald{ background: var(--emerald); color:#fff; border-color: var(--emerald); }
    .tab-emerald i{ color:#fff; }

    .tab-marmoreal{ background:#e9decd; color:#3d352b; border-color:#d7cab6; }
    .tab-marmoreal i{ color:#3d352b; }

    .tab-white{ background:#f4f6ff; color:#0B1A39; border-color:#cdd3ff; }
    .tab-white i{ color:#0B1A39; }

    .tab-button:hover{
      transform: translateY(-1px);
      filter: brightness(1.04);
    }

    .tab-button.disabled{
      opacity:.55; cursor:not-allowed; filter:grayscale(.35); pointer-events:none;
    }

    .placeholder-note{
      padding:14px;
      background:#fafbfd;
      border:1px dashed #e6e7ee;
      border-radius:12px;
      color:#666;
      font-size:.95em;
    }

    /* ===== الحلقات الفضية الواقعية + ثقوب ===== */
    .center-binder{
      width:62px;
      min-width:62px;
      margin:0 14px;
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:space-between;
      padding:50px 0;
    }
    .center-binder::before{
      /* ظل عمودي بين الصفحتين */
      content:"";
      position:absolute;
      top:30px; bottom:30px; width:10px;
      background: radial-gradient(closest-side, rgba(0,0,0,.16), rgba(0,0,0,.05) 60%, transparent 70%);
      filter: blur(1px);
      border-radius:10px;
      left:50%; transform:translateX(-50%);
      z-index:0;
    }
    .center-binder::after{
      /* صف ثقوب احترافية */
      content:"";
      position:absolute;
      top:36px; bottom:36px; width:8px;
      left:50%; transform:translateX(-50%);
      background:
        radial-gradient(circle at 50% 6px, #6e6f73 2.5px, transparent 2.6px) repeat-y;
      background-size:8px 22px;
      opacity:.7;
      z-index:1;
      border-radius:4px;
    }

    .ring{
      width:58px; height:58px; border-radius:50%;
      position:relative; z-index:2;
      background:
        radial-gradient(120% 120% at 30% 30%, #ffffff 0%, #e8e9ec 25%, #cfd1d6 45%, #a8a9ad 62%, #8b8c90 75%, #6e6f73 100%);
      box-shadow:
        inset 6px 6px 10px rgba(255,255,255,.85),
        inset -6px -6px 12px rgba(0,0,0,.25),
        0 8px 18px rgba(0,0,0,.15);
    }
    .ring::after{
      /* فتحة داخلية */
      content:"";
      position:absolute;
      inset:8px;
      border-radius:50%;
      background:
        radial-gradient(120% 120% at 70% 70%, #f7f7f9 0%, #dfe1e6 45%, #b9bbc2 70%, #94969d 100%);
      box-shadow:
        inset 3px 3px 6px rgba(255,255,255,.8),
        inset -3px -3px 6px rgba(0,0,0,.25);
    }
    .ring-top{ margin-bottom:70px; }
    .ring-bottom{ margin-top:70px; }

    /* ===== صفحات كاملة (Overlays) ===== */
    .page-overlay{
      position:fixed; inset:0; background:#f7f8fb; z-index:99; display:none;
      overflow:auto; -webkit-overflow-scrolling:touch;
    }
    .page-overlay.active{ display:block; }
    .page{
      max-width:1200px; margin:0 auto; padding:20px 16px 80px;
    }
    .page .page-card{
      background:var(--paper);
      border-radius:22px;
      box-shadow:0 8px 26px rgba(0,0,0,.10);
      padding:22px;
    }
    .page-header{
      display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:14px;
    }
    .back-btn{
      display:inline-flex; align-items:center; gap:8px;
      background:var(--navy); color:#fff; border:none; border-radius:10px; padding:10px 14px; cursor:pointer;
      box-shadow:0 3px 8px rgba(0,0,0,.15);
      text-decoration:none;
    }
    .page-title{ margin:0; font-weight:700; font-size:1.15em; color:#222; }

    /* ===== مسطرة عامة ===== */
    .ruled{
      background-image:
        linear-gradient(to bottom, transparent calc(100% - 1px), var(--ruled-line) calc(100% - 1px)),
        linear-gradient(to right, rgba(0,0,0,0.02), rgba(0,0,0,0.02));
      background-size: 100% 34px, 100% 100%;
      background-repeat:repeat;
      border:1px solid #eee;
      border-radius:12px;
    }

    /* ===== قوائم Checkbox مسطرة ===== */
    .checkbox-ruled{
      display:flex; flex-direction:column; padding:8px 10px; max-height:70vh; overflow:auto;
    }
    .checkbox-ruled .item{
      display:flex; align-items:center; gap:10px; height:34px; border-bottom:1px solid var(--ruled-line);
    }
    .checkbox-ruled .item:last-child{ border-bottom:none; }
    .checkbox-ruled input[type="checkbox"]{ transform:scale(1.2); accent-color:var(--ruby); margin-left:6px; }
    .checkbox-ruled .line{ flex:1; height:100%; }

    .toolbar{ display:flex; gap:8px; align-items:center; margin-bottom:10px; flex-wrap:wrap; }
    .toolbar .btn{
      background:#fff; border:1px solid #e6e6e9; border-radius:10px; padding:8px 10px; cursor:pointer; font-size:.95em;
    }
    .toolbar .btn i{ margin-left:6px; color:#7b7b7f; }
    .toolbar .btn:hover{ background:#fafafa; }

    /* ===== جدول المصروفات: دفتر محاسبي مسطر ===== */
    .ledger-wrap{ overflow:auto; }
    .ledger-table{
      width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed;
      border:1px solid #ececf0; border-radius:14px; overflow:hidden;
      box-shadow:0 2px 10px rgba(0,0,0,.05);
    }
    .ledger-table thead th{
      background:#f6efe6; color:#3b2f22; font-weight:700; text-align:center; padding:12px 8px;
      border-bottom:1px solid #e8e0d5;
      position:sticky; top:0; z-index:1;
    }
    .ledger-table tbody td{
      background:
        linear-gradient(to bottom, transparent 33px, var(--ruled-line) 33px),
        #fff;
      background-size:100% 34px, 100% 100%;
      height:34px; padding:6px 8px; border-right:1px solid #f0f0f2; text-align:right; color:#333;
    }
    .ledger-table tbody td:last-child{ border-right:none; }
    .ledger-table tr:last-child td{ box-shadow: inset 0 -1px 0 var(--ruled-line); }

    /* ===== بطاقات الرسم/الكتابة الحرة ===== */
    .cards-grid{
      display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:14px;
    }
    .draw-card{
      position:relative; border:1px solid #eee; border-radius:14px; overflow:hidden; background:#fff;
      box-shadow: 0 2px 12px rgba(0,0,0,.05);
    }
    .draw-card .card-toolbar{
      position:absolute; top:8px; left:8px; z-index:2; display:flex; gap:6px;
      background:rgba(255,255,255,.88); border:1px solid #eee; border-radius:10px; padding:4px 6px; align-items:center;
      backdrop-filter: saturate(120%) blur(2px);
    }
    .draw-card .card-toolbar button,
    .draw-card .card-toolbar input[type="color"],
    .draw-card .card-toolbar input[type="range"]{
      border:1px solid #ddd; background:#fff; border-radius:8px; padding:4px 6px; cursor:pointer;
    }
    .draw-card .card-toolbar button:hover{ background:#fafafa; }
    .draw-card .ruled{ height:260px; }
    .draw-card canvas{ position:absolute; inset:0; width:100%; height:100%; touch-action:none; }

    /* ===== شريط التحضير اليومي الصغير (أفقي جداً) ===== */
    .prep-strip{
      display:grid;
      grid-template-columns: auto 140px auto 180px repeat(8, minmax(60px,1fr));
      gap:8px; align-items:center; margin-bottom:12px;
    }
    .prep-strip .label{ font-weight:700; color:#564939; font-size:.95em; }
    .prep-strip .box{
      height:34px; border:1px solid #e6e2db; border-radius:10px; background:#fff; position:relative;
      box-shadow: inset 0 -1px 0 var(--ruled-line);
    }
    .prep-strip .box.ruled{
      background-image: linear-gradient(to bottom, transparent calc(100% - 1px), var(--ruled-line) calc(100% - 1px));
      background-size:100% 34px;
    }
    .prep-strip .box[data-n]::before{
      content: attr(data-n);
      position:absolute; top:4px; left:6px; font-size:.8em; color:#9a8364;
    }

    /* ===== التقويمات المصغرة ===== */
    .footer-calendars{ margin-top:auto; border-top:1px solid #eee; padding-top:16px; }
    .months-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
    .mini-month{
      background:#fff; border:1px solid #eee; border-radius:12px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,.04);
    }
    .mini-month .mh{
      background:#f6efe6; color:#3b2f22; padding:8px 10px; font-weight:700; font-size:.95em; border-bottom:1px solid #e8e0d5;
    }
    .mini-month table{ width:100%; border-collapse:collapse; table-layout:fixed; }
    .mini-month th, .mini-month td{ text-align:center; font-size:.85em; padding:6px 0; border-bottom:1px solid #fafafa; }
    .mini-month tr:last-child td{ border-bottom:none; }
    .mini-month .wk th{ background:#fdfbf8; color:#7b6b59; font-weight:700; }

    /* تمييز عمودي للجمعة والسبت (عُمان) */
    .mini-month .wk th.weekend{ background:#f1eae2; color:#8c6f52; }
    .mini-month td.weekend{ background:#f7f3ef; color:#a67c52; }

    /* تمييز خاص ليوم الراتب */
    .mini-month td.salary{
      background: var(--ruby) !important; color:#fff !important; border-radius:8px;
      font-weight:700; box-shadow: inset 0 0 0 1px rgba(255,255,255,.25);
    }

    /* تمييز للأحداث */
    .mini-month td.event-official{ background: var(--emerald); color:#fff; border-radius:8px; }
    .mini-month td.event-religious{ background: var(--navy); color:#fff; border-radius:8px; }
    .mini-month td.event-school{ background: #9a8364; color:#fff; border-radius:8px; }

    /* تبويبات الشهور الجانبية */
    .side-months{
      position:fixed; top:50%; transform:translateY(-50%);
      display:flex; flex-direction:column; gap:6px; z-index:120;
      pointer-events:auto;
    }
    .side-months a{
      writing-mode:vertical-rl;
      padding:12px 8px; border-radius:12px;
      background:#0B1A39; color:#fff; text-decoration:none; font-size:.85em;
      border:1px solid rgba(255,255,255,.18);
      box-shadow:0 3px 10px rgba(0,0,0,.15);
    }
    .side-months a:hover{ filter:brightness(1.1); }
    .right-side{ right:10px; }
    .left-side{ left:10px; }

    /* استجابة */
    @media (max-width:1200px){
      .planner-container{ flex-direction:column; gap:18px; }
      .center-binder{ height:62px; width:auto; min-width:unset; margin:8px 0; padding:0; flex-direction:row; gap:30px; }
      .ring-top{ margin:0; }
      .ring-bottom{ margin:0; }
    }
    @media (max-width:768px){
      .planner-page{ padding:20px; border-radius:16px; }
      .header .logo{ font-size:2em; }
      .tabs-section .tab-button{ padding:10px 14px; }
      .months-grid{ grid-template-columns:1fr 1fr; }
      .prep-strip{ grid-template-columns: auto 120px auto 150px repeat(8, minmax(44px,1fr)); }
    }
  </style>
</head>
<body id="home">

  <!-- زر تبديل اللغة -->
  <button id="langToggle" class="lang-btn" type="button" aria-label="Toggle language">English</button>

  <!-- تبويبات الشهور الجانبية (ديناميكية بالـ JS) -->
  <div class="side-months right-side" id="sideMonthsRight"></div>
  <div class="side-months left-side" id="sideMonthsLeft"></div>

  <div class="planner-container">

    <!-- الصفحة اليمنى: شخصية -->
    <div class="planner-page personal-page">
      <div class="header">
        <div class="logo">MYH</div>
        <div class="title">
          <h1>صفحة الحياة اليومية الشخصية</h1>
          <p>أ/ محمد ياسين حلمي - مخطط 2026</p>
        </div>
      </div>

      <div class="tabs-section">
        <a class="tab-button tab-ruby" href="#page-personal-tasks">
          <i class="fas fa-tasks"></i><span>مهام اليوم</span>
        </a>
        <a class="tab-button tab-navy" href="#page-expenses">
          <i class="fas fa-wallet"></i><span>المصروفات</span>
        </a>
        <a class="tab-button tab-emerald" href="#page-personal-notes">
          <i class="fas fa-clipboard"></i><span>ملاحظات</span>
        </a>
      </div>

      <div class="placeholder-note">
        اضغط أي تبويب ليفتح صفحة كاملة مصمّمة للآيباد (كتابة بالقلم / إدخال بالقلم).
      </div>

      <!-- تقويم يناير–يونيو 2026 (يمين) -->
      <div class="footer-calendars">
        <div class="months-grid" id="right-months"></div>
      </div>
    </div>

    <!-- الفاصل الحلقي الفضي (حلقتان) -->
    <div class="center-binder" aria-hidden="true">
      <div class="ring ring-top"></div>
      <div class="ring ring-bottom"></div>
    </div>

    <!-- الصفحة اليسرى: مهنية -->
    <div class="planner-page professional-page">
      <div class="header">
        <div class="logo">MYH</div>
        <div class="title">
          <h1>مركز المعلم الاحترافي</h1>
          <p>أ/ محمد ياسين حلمي - مخطط معلم الفنون 2026</p>
        </div>
      </div>

      <div class="tabs-section">
        <a class="tab-button tab-navy" id="btn-daily-prep" href="#page-daily-preparation" title="التحضير اليومي">
          <i class="fas fa-palette"></i><span>التحضير اليومي</span>
        </a>
        <a class="tab-button tab-white" href="#page-professional-tasks">
          <i class="fas fa-check-square"></i><span>المهام اليومية</span>
        </a>
        <a class="tab-button tab-emerald" href="#page-creative-ideas">
          <i class="fas fa-lightbulb"></i><span>Creative Ideas</span>
        </a>
        <a class="tab-button tab-marmoreal" href="#page-sunday">
          <i class="fas fa-calendar-day"></i><span>أحد الأسبوع</span>
        </a>
      </div>

      <div class="placeholder-note">
        ملاحظة: التحضير اليومي مفعّل من الأحد إلى الخميس فقط. تبويب أحد الأسبوع يوفر ١٠ بطاقات للكتابة بالقلم.
      </div>

      <!-- تقويم يوليو–ديسمبر 2026 (يسار) -->
      <div class="footer-calendars">
        <div class="months-grid" id="left-months"></div>
      </div>
    </div>
  </div>

  <!-- ========= الصفحات الكاملة ========= -->

  <!-- يمين: مهام اليوم -->
  <div class="page-overlay" id="page-personal-tasks" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">مهام اليوم - صفحة مسطّرة</h2>
      </div>
      <div class="page-card">
        <div class="toolbar">
          <button class="btn" data-add-line="#personalTasksList"><i class="fa fa-plus"></i>إضافة سطر</button>
          <button class="btn" data-clear-lines="#personalTasksList"><i class="fa fa-trash"></i>تفريغ القائمة</button>
        </div>
        <div class="ruled checkbox-ruled" id="personalTasksList"></div>
      </div>
    </div>
  </div>

  <!-- يمين: المصروفات (دفتر محاسبي مسطر) -->
  <div class="page-overlay" id="page-expenses" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">تتبع المصروفات - صفحة دفترية مسطّرة</h2>
      </div>
      <div class="page-card">
        <div class="ledger-wrap">
          <table class="ledger-table" id="ledgerTable">
            <thead>
              <tr>
                <th>الرصيد</th>
                <th>viza</th>
                <th>walleti</th>
                <th>البند</th>
                <th>المصروف</th>
                <th>ملاحظات</th>
              </tr>
            </thead>
            <tbody>
              <!-- تُولّد صفوف فارغة عبر JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- يمين: ملاحظات (مسطرة + ورقة اليوم) -->
  <div class="page-overlay" id="page-personal-notes" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">ملاحظات شخصية</h2>
      </div>
      <div class="page-card">
        <div class="ruled" style="min-height:70vh; position:relative;">
          <div style="position:absolute; top:10px; left:10px; background:#fff7ea; color:#5b3c1e; border:1px dashed #e8d2b8; padding:6px 10px; border-radius:10px; font-size:.9em;" id="todaySlip">
            <i class="fa fa-calendar"></i> <span>اليوم - التاريخ</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- يسار: التحضير اليومي -->
  <div class="page-overlay" id="page-daily-preparation" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">التحضير اليومي</h2>
      </div>
      <div class="page-card">
        <!-- شريط علوي صغير جداً -->
        <div class="prep-strip">
          <div class="label">الصف</div>
          <div class="box ruled" id="prep-class" title="اكتب الصف بالقلم"></div>
          <div class="label">اليوم</div>
          <div class="box ruled" id="prep-day" title="اليوم والتاريخ"></div>
          <div class="box ruled" data-n="١" title="حصة 1"></div>
          <div class="box ruled" data-n="٢" title="حصة 2"></div>
          <div class="box ruled" data-n="٣" title="حصة 3"></div>
          <div class="box ruled" data-n="٤" title="حصة 4"></div>
          <div class="box ruled" data-n="٥" title="حصة 5"></div>
          <div class="box ruled" data-n="٦" title="حصة 6"></div>
          <div class="box ruled" data-n="٧" title="حصة 7"></div>
          <div class="box ruled" data-n="٨" title="حصة 8"></div>
        </div>

        <!-- 5 بطاقات كبيرة -->
        <div class="cards-grid" id="prepCards"></div>
      </div>
    </div>
  </div>

  <!-- يسار: المهام اليومية -->
  <div class="page-overlay" id="page-professional-tasks" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">المهام اليومية المهنية</h2>
      </div>
      <div class="page-card">
        <div class="toolbar">
          <button class="btn" data-add-line="#professionalTasksList"><i class="fa fa-plus"></i>إضافة سطر</button>
          <button class="btn" data-clear-lines="#professionalTasksList"><i class="fa fa-trash"></i>تفريغ القائمة</button>
        </div>
        <div class="ruled checkbox-ruled" id="professionalTasksList"></div>
      </div>
    </div>
  </div>

  <!-- يسار: Creative Ideas -->
  <div class="page-overlay" id="page-creative-ideas" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">Creative Ideas - كتابة حرة</h2>
      </div>
      <div class="page-card">
        <div class="ruled" style="min-height:70vh;"></div>
      </div>
    </div>
  </div>

  <!-- يسار: أحد الأسبوع (10 بطاقات) -->
  <div class="page-overlay" id="page-sunday" role="dialog" aria-modal="true">
    <div class="page">
      <div class="page-header">
        <a class="back-btn" href="#home"><i class="fa fa-arrow-right"></i>رجوع</a>
        <h2 class="page-title">أحد الأسبوع - بطاقات للكتابة بالقلم</h2>
      </div>
      <div class="page-card">
        <div class="cards-grid" id="sundayCards"></div>
      </div>
    </div>
  </div>

  <script>
    /* =========================================================
       i18n + إدارة اللغة
       ========================================================= */
    const i18n = {
      ar: {
        langName: 'العربية',
        langButton: 'English',
        dir: 'rtl',
        locale: 'ar-EG',
        months: ['يناير','فبراير','مارس','أبريل','مايو','يونيو','يوليو','أغسطس','سبتمبر','أكتوبر','نوفمبر','ديسمبر'],
        weekdaysShort: ['أحد','اثن','ثلا','أرب','خمي','جمع','سبت'],
        ui: {
          personal_header_title: 'صفحة الحياة اليومية الشخصية',
          personal_header_sub: 'أ/ محمد ياسين حلمي - مخطط 2026',
          professional_header_title: 'مركز المعلم الاحترافي',
          professional_header_sub: 'أ/ محمد ياسين حلمي - مخطط معلم الفنون 2026',
          tab_personal_tasks: 'مهام اليوم',
          tab_expenses: 'المصروفات',
          tab_personal_notes: 'ملاحظات',
          tab_daily_prep: 'التحضير اليومي',
          tab_professional_tasks: 'المهام اليومية',
          tab_creative_ideas: 'Creative Ideas',
          tab_sunday: 'أحد الأسبوع',
          placeholder_personal: 'اضغط أي تبويب ليفتح صفحة كاملة مصمّمة للآيباد (كتابة بالقلم / إدخال بالقلم).',
          placeholder_prof: 'ملاحظة: التحضير اليومي مفعّل من الأحد إلى الخميس فقط. تبويب أحد الأسبوع يوفر ١٠ بطاقات للكتابة بالقلم.',
          page_personal_tasks_title: 'مهام اليوم - صفحة مسطّرة',
          page_expenses_title: 'تتبع المصروفات - صفحة دفترية مسطّرة',
          page_personal_notes_title: 'ملاحظات شخصية',
          page_daily_prep_title: 'التحضير اليومي',
          page_professional_tasks_title: 'المهام اليومية المهنية',
          page_creative_ideas_title: 'Creative Ideas - كتابة حرة',
          page_sunday_title: 'أحد الأسبوع - بطاقات للكتابة بالقلم',
          back: 'رجوع',
          add_line: 'إضافة سطر',
          clear_list: 'تفريغ القائمة',
          today_slip_prefix: 'اليوم',
          prep_label_class: 'الصف',
          prep_label_day: 'اليوم',
          salary_label: 'يوم الراتب'
        }
      },
      en: {
        langName: 'English',
        langButton: 'العربية',
        dir: 'ltr',
        locale: 'en-US',
        months: ['January','February','March','April','May','June','July','August','September','October','November','December'],
        weekdaysShort: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],
        ui: {
          personal_header_title: 'Personal Daily Page',
          personal_header_sub: 'Mr. Mohamed Yassin Helmy — Planner 2026',
          professional_header_title: 'Teacher’s Pro Center',
          professional_header_sub: 'Mr. Mohamed Yassin Helmy — Art Teacher Planner 2026',
          tab_personal_tasks: 'Today’s Tasks',
          tab_expenses: 'Expenses',
          tab_personal_notes: 'Notes',
          tab_daily_prep: 'Daily Preparation',
          tab_professional_tasks: 'Work Tasks',
          tab_creative_ideas: 'Creative Ideas',
          tab_sunday: 'Sunday Board',
          placeholder_personal: 'Tap any tab to open a full iPad page (Apple Pencil handwriting / pen input).',
          placeholder_prof: 'Note: Daily Preparation is enabled from Sunday to Thursday only. The Sunday tab provides 10 freehand cards.',
          page_personal_tasks_title: 'Today’s Tasks — Ruled Page',
          page_expenses_title: 'Expenses Tracker — Ledger-Style',
          page_personal_notes_title: 'Personal Notes',
          page_daily_prep_title: 'Daily Preparation',
          page_professional_tasks_title: 'Professional Daily Tasks',
          page_creative_ideas_title: 'Creative Ideas — Free Writing',
          page_sunday_title: 'Sunday — Pen Writing Cards',
          back: 'Back',
          add_line: 'Add Line',
          clear_list: 'Clear List',
          today_slip_prefix: 'Today',
          prep_label_class: 'Class',
          prep_label_day: 'Day',
          salary_label: 'Salary Day'
        }
      }
    };

    function getSavedLang(){ return localStorage.getItem('plannerLang') || 'ar'; }
    function saveLang(l){ localStorage.setItem('plannerLang', l); }

    function todayInfoWithLocale(locale){
      const d = new Date();
      const dayName = d.toLocaleDateString(locale, {weekday:'long'});
      const dateStr = d.toLocaleDateString(locale, {year:'numeric', month:'long', day:'numeric'});
      return { d, dayName, dateStr };
    }

    /* =========================================================
       أحداث 2026 (قابلة للتعديل) — يرجى التحقق رسميًا قبل الاعتماد
       النوع: official | religious | school
       ========================================================= */
    const events2026 = {
      // أمثلة تقريبية — عدّلها حسب الجهة الرسمية في سلطنة عُمان
      '2026-01-01': {title:'رأس السنة الميلادية', type:'official'},
      '2026-01-27': {title:'الإسراء والمعراج', type:'religious'},
      // رمضان (تقريبي) وبداياته تختلف فلكياً — استخدم التقويم المعتمد لاحقًا
      '2026-03-20': {title:'بداية رمضان (تقريبي)', type:'religious'},
      '2026-03-29': {title:'عيد الفطر (تقريبي)', type:'official'},
      '2026-03-30': {title:'إجازة عيد الفطر (تقريبي)', type:'official'},
      '2026-06-05': {title:'وقفة عرفة (تقريبي)', type:'religious'},
      '2026-06-06': {title:'عيد الأضحى (تقريبي)', type:'official'},
      '2026-06-07': {title:'إجازة عيد الأضحى (تقريبي)', type:'official'},
      '2026-09-15': {title:'المولد النبوي (تقريبي)', type:'religious'},
      '2026-11-18': {title:'العيد الوطني العماني', type:'official'},

      // مثال لأحداث مدرسية (عدّل حسب رزنامة الوزارة)
      '2026-08-25': {title:'بداية العام الدراسي (مثال)', type:'school'},
      '2026-12-22': {title:'بداية إجازة منتصف العام (مثال)', type:'school'}
    };

    /* =========================================================
       أدوات عامة
       ========================================================= */
    function closeAllOverlays(){
      document.querySelectorAll('.page-overlay').forEach(el=> el.classList.remove('active'));
      document.querySelectorAll('.tab-button').forEach(b=> b.classList.remove('active'));
    }
    function openOverlayById(id){
      const el=document.getElementById(id);
      if(!el) return;
      closeAllOverlays();
      el.classList.add('active');
      const tab = document.querySelector('.tab-button[href="#'+id+'"]');
      if(tab) tab.classList.add('active');
    }
    function openFromHash(){
      const h = window.location.hash || '#home';
      if(h==='#home' || h==='#' || h===''){ closeAllOverlays(); return; }
      const id = h.substring(1);
      openOverlayById(id);
    }
    function todayInfo(){
      const d=new Date();
      const locale=currentPack.locale;
      const dayName=d.toLocaleDateString(locale,{weekday:'long'});
      const dateStr=d.toLocaleDateString(locale,{year:'numeric',month:'long',day:'numeric'});
      return {d, dayName, dateStr};
    }
    function isSunToThu(dateObj){ const n=dateObj.getDay(); return (n>=0 && n<=4); } // أحد..خميس
    function isSunday(dateObj){ return dateObj.getDay()===0; }

    // قوائم Checkbox
    function addCheckboxLine(container){
      const line=document.createElement('div'); line.className='item';
      const cb=document.createElement('input'); cb.type='checkbox';
      const span=document.createElement('div'); span.className='line';
      line.appendChild(cb); line.appendChild(span); container.appendChild(line);
    }
    function fillCheckboxLines(container,count){ for(let i=0;i<count;i++) addCheckboxLine(container); }
    function clearCheckboxLines(container){ container.innerHTML=''; }

    // بطاقات الرسم (Canvas)
    function setupDrawCard(cardEl){
      const ruled=document.createElement('div'); ruled.className='ruled'; cardEl.appendChild(ruled);
      const canvas=document.createElement('canvas'); cardEl.appendChild(canvas);
      const toolbar=document.createElement('div'); toolbar.className='card-toolbar';
      const clrBtn=document.createElement('button'); clrBtn.innerHTML='<i class="fa fa-eraser"></i>مسح';
      const colorInp=document.createElement('input'); colorInp.type='color'; colorInp.value='#333333';
      const rangeInp=document.createElement('input'); rangeInp.type='range'; rangeInp.min='1'; rangeInp.max='8'; rangeInp.value='2';
      toolbar.appendChild(colorInp); toolbar.appendChild(rangeInp); toolbar.appendChild(clrBtn); cardEl.appendChild(toolbar);

      const ctx=canvas.getContext('2d');
      let drawing=false,lastX=0,lastY=0,strokeStyle=colorInp.value,lineW=parseInt(rangeInp.value,10);

      function resize(){
        const prev=document.createElement('canvas'); prev.width=canvas.width; prev.height=canvas.height;
        prev.getContext('2d').drawImage(canvas,0,0);
        const rect=cardEl.getBoundingClientRect();
        canvas.width=rect.width; canvas.height=rect.height;
        ctx.drawImage(prev,0,0,prev.width,prev.height,0,0,canvas.width,canvas.height);
      }
      new ResizeObserver(resize).observe(cardEl); setTimeout(resize,60);

      function pos(e){
        const r=canvas.getBoundingClientRect();
        if(e.touches && e.touches.length){ return {x:e.touches[0].clientX-r.left, y:e.touches[0].clientY-r.top}; }
        return {x:e.clientX-r.left, y:e.clientY-r.top};
      }
      function start(e){ e.preventDefault(); drawing=true; const p=pos(e); lastX=p.x; lastY=p.y; }
      function move(e){
        if(!drawing) return; const p=pos(e);
        ctx.strokeStyle=strokeStyle; ctx.lineWidth=lineW; ctx.lineCap='round'; ctx.lineJoin='round';
        ctx.beginPath(); ctx.moveTo(lastX,lastY); ctx.lineTo(p.x,p.y); ctx.stroke();
        lastX=p.x; lastY=p.y;
      }
      function end(){ drawing=false; }

      canvas.addEventListener('pointerdown',start);
      canvas.addEventListener('pointermove',move);
      window.addEventListener('pointerup',end);
      canvas.addEventListener('touchstart',start,{passive:false});
      canvas.addEventListener('touchmove',move,{passive:false});
      window.addEventListener('touchend',end);

      clrBtn.addEventListener('click',()=>ctx.clearRect(0,0,canvas.width,canvas.height));
      colorInp.addEventListener('input',()=>strokeStyle=colorInp.value);
      rangeInp.addEventListener('input',()=>lineW=parseInt(rangeInp.value,10));
    }

    /* =========================================================
       التقويم المصغر + الخريطة اللونية + الراتب
       ========================================================= */
    let currentLang = getSavedLang();
    let currentPack = i18n[currentLang];
    let selectedDate = null; // {y, mIdx, d}

    function salaryDay(year, monthIdx){
      // يوم 23، وإذا وافق جمعة (5) / سبت (6) يُنقل لـ 21
      const d23 = new Date(year, monthIdx, 23);
      const wd = d23.getDay();
      if(wd===5 || wd===6) return 21;
      return 23;
    }
    function dateKey(year, monthIdx, d){
      return `${year}-${String(monthIdx+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    }

    function openDay(year, monthIdx, d){
      selectedDate = {y:year, mIdx:monthIdx, d};
      // حدّث بطاقة اليوم + التحضير
      const locale = currentPack.locale;
      const dt = new Date(year, monthIdx, d);
      const dayName = dt.toLocaleDateString(locale,{weekday:'long'});
      const dateStr = dt.toLocaleDateString(locale,{year:'numeric', month:'long', day:'numeric'});

      const slip = document.getElementById('todaySlip');
      if(slip){
        const span = slip.querySelector('span');
        if(span){ span.textContent = `${currentPack.ui.today_slip_prefix} - ${dayName} - ${dateStr}`; }
      }
      const prepDay = document.getElementById('prep-day');
      if(prepDay){ prepDay.textContent = `${dayName} - ${dateStr}`; }

      // افتح مبدئيًا صفحة الملاحظات
      location.hash = '#page-personal-notes';
    }

    function miniMonth(year, monthIdx, lang){
      const pack = i18n[lang];
      const first=new Date(year,monthIdx,1), last=new Date(year,monthIdx+1,0);
      let firstW=first.getDay(), days=last.getDate();

      // بناء الوعاء
      const wrapper=document.createElement('div'); wrapper.className='mini-month';
      const head=document.createElement('div'); head.className='mh'; head.textContent=pack.months[monthIdx]+' '+year; wrapper.appendChild(head);

      const table=document.createElement('table');
      const trh=document.createElement('tr'); trh.className='wk';
      // عناوين الأيام
      pack.weekdaysShort.forEach((w, i)=>{
        const th=document.createElement('th'); th.textContent=w;
        if(i===5 || i===6) th.classList.add('weekend'); // جمعة/سبت
        trh.appendChild(th);
      });
      table.appendChild(trh);

      // تعويض بدايات الأسبوع
      let tr=document.createElement('tr');
      for(let i=0;i<firstW;i++){ const td=document.createElement('td'); td.className='empty'; tr.appendChild(td); }
      let dow=firstW;

      const sDay = salaryDay(year, monthIdx);

      for(let d=1; d<=days; d++){
        if(dow===7){ table.appendChild(tr); tr=document.createElement('tr'); dow=0; }
        const td=document.createElement('td'); td.textContent=d;

        // تحديد اليوم من الأسبوع: 0 أحد ... 6 سبت
        const dayOfWeek = new Date(year, monthIdx, d).getDay();
        if(dayOfWeek===5 || dayOfWeek===6) td.classList.add('weekend');

        // أحداث
        const key = dateKey(year, monthIdx, d);
        if(events2026[key]){
          const t = events2026[key].type;
          if(t==='official') td.classList.add('event-official');
          else if(t==='religious') td.classList.add('event-religious');
          else if(t==='school') td.classList.add('event-school');
          td.title = events2026[key].title;
        }

        // يوم الراتب
        if(d===sDay){
          td.classList.add('salary');
          if(td.title) td.title += ' • ' + currentPack.ui.salary_label;
          else td.title = currentPack.ui.salary_label;
        }

        // تفاعل: افتح اليوم
        td.style.cursor='pointer';
        td.addEventListener('click', ()=> openDay(year, monthIdx, d));

        tr.appendChild(td); dow++;
      }
      if(dow>0 && dow<7){
        for(let i=dow;i<7;i++){ const td=document.createElement('td'); td.className='empty'; tr.appendChild(td); }
      }
      table.appendChild(tr); wrapper.appendChild(table);
      return wrapper;
    }

    function renderCalendars(lang){
      const right=document.getElementById('right-months');
      const left=document.getElementById('left-months');
      right.innerHTML=''; left.innerHTML='';

      // يمين: يناير–يونيو | يسار: يوليو–ديسمبر
      for(let m=0;m<6;m++){
        const node = miniMonth(2026, m, lang);
        node.id = `mini-2026-${String(m+1).padStart(2,'0')}`;
        right.appendChild(node);
      }
      for(let m=6;m<12;m++){
        const node = miniMonth(2026, m, lang);
        node.id = `mini-2026-${String(m+1).padStart(2,'0')}`;
        left.appendChild(node);
      }
    }

    function renderSideMonthTabs(lang){
      const pack = i18n[lang];
      const right = document.getElementById('sideMonthsRight');
      const left  = document.getElementById('sideMonthsLeft');
      if(right) right.innerHTML=''; if(left) left.innerHTML='';

      for(let m=0; m<12; m++){
        const a = document.createElement('a');
        a.href = `#mini-2026-${String(m+1).padStart(2,'0')}`;
        a.textContent = pack.months[m];
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          const id = `mini-2026-${String(m+1).padStart(2,'0')}`;
          const target = document.getElementById(id);
          if(target){
            closeAllOverlays();
            target.scrollIntoView({behavior:'smooth', block:'center'});
          }else{
            location.hash = '#page-personal-notes';
          }
        });
        // توزيع: أول 6 أشهر يمين، آخر 6 أشهر يسار
        if(m<6){ right && right.appendChild(a); }
        else{ left && left.appendChild(a); }
      }
    }

    /* =========================================================
       تطبيق اللغة على الواجهة
       ========================================================= */
    function applyLanguage(lang){
      currentLang = lang;
      currentPack = i18n[lang];
      document.documentElement.lang = (lang==='ar' ? 'ar' : 'en');
      document.documentElement.dir = currentPack.dir;

      // زر التبديل
      const toggleBtn = document.getElementById('langToggle');
      if(toggleBtn){ toggleBtn.textContent = currentPack.langButton; }

      // نصوص أساسية
      const map = [
        ['.personal-page .header h1', currentPack.ui.personal_header_title],
        ['.personal-page .header p',  currentPack.ui.personal_header_sub],
        ['.professional-page .header h1', currentPack.ui.professional_header_title],
        ['.professional-page .header p',  currentPack.ui.professional_header_sub],

        ['a[href="#page-personal-tasks"] span', currentPack.ui.tab_personal_tasks],
        ['a[href="#page-expenses"] span',        currentPack.ui.tab_expenses],
        ['a[href="#page-personal-notes"] span',  currentPack.ui.tab_personal_notes],

        ['a[href="#page-daily-preparation"] span', currentPack.ui.tab_daily_prep],
        ['a[href="#page-professional-tasks"] span', currentPack.ui.tab_professional_tasks],
        ['a[href="#page-creative-ideas"] span',     currentPack.ui.tab_creative_ideas],
        ['a[href="#page-sunday"] span',             currentPack.ui.tab_sunday],

        ['.personal-page .placeholder-note', currentPack.ui.placeholder_personal],
        ['.professional-page .placeholder-note', currentPack.ui.placeholder_prof],

        ['#page-personal-tasks .page-title', currentPack.ui.page_personal_tasks_title],
        ['#page-expenses .page-title', currentPack.ui.page_expenses_title],
        ['#page-personal-notes .page-title', currentPack.ui.page_personal_notes_title],
        ['#page-daily-preparation .page-title', currentPack.ui.page_daily_prep_title],
        ['#page-professional-tasks .page-title', currentPack.ui.page_professional_tasks_title],
        ['#page-creative-ideas .page-title', currentPack.ui.page_creative_ideas_title],
        ['#page-sunday .page-title', currentPack.ui.page_sunday_title],

        ['#page-personal-tasks .back-btn', currentPack.ui.back],
        ['#page-expenses .back-btn', currentPack.ui.back],
        ['#page-personal-notes .back-btn', currentPack.ui.back],
        ['#page-daily-preparation .back-btn', currentPack.ui.back],
        ['#page-professional-tasks .back-btn', currentPack.ui.back],
        ['#page-creative-ideas .back-btn', currentPack.ui.back],
        ['#page-sunday .back-btn', currentPack.ui.back],

        ['[data-add-line="#personalTasksList"]', currentPack.ui.add_line],
        ['[data-clear-lines="#personalTasksList"]', currentPack.ui.clear_list],
        ['[data-add-line="#professionalTasksList"]', currentPack.ui.add_line],
        ['[data-clear-lines="#professionalTasksList"]', currentPack.ui.clear_list]
      ];
      map.forEach(([sel, val])=>{
        const el = document.querySelector(sel);
        if(!el) return;
        if(el.classList.contains('back-btn')){
          const icon = el.querySelector('i');
          el.textContent = val;
          if(icon){ el.prepend(icon); }
        }else{
          el.textContent = val;
        }
      });

      // تحديث التاريخ الحالي أو اليوم المختار
      const slip = document.getElementById('todaySlip');
      if(slip){
        const span = slip.querySelector('span');
        let d, dayName, dateStr;
        if(selectedDate){
          const dt = new Date(selectedDate.y, selectedDate.mIdx, selectedDate.d);
          dayName = dt.toLocaleDateString(currentPack.locale, {weekday:'long'});
          dateStr = dt.toLocaleDateString(currentPack.locale, {year:'numeric', month:'long', day:'numeric'});
        }else{
          const info = todayInfoWithLocale(currentPack.locale);
          dayName = info.dayName; dateStr = info.dateStr;
        }
        if(span){ span.textContent = `${currentPack.ui.today_slip_prefix} - ${dayName} - ${dateStr}`; }
      }
      const prepDay = document.getElementById('prep-day');
      if(prepDay){
        if(selectedDate){
          const dt = new Date(selectedDate.y, selectedDate.mIdx, selectedDate.d);
          const dayName = dt.toLocaleDateString(currentPack.locale, {weekday:'long'});
          const dateStr = dt.toLocaleDateString(currentPack.locale, {year:'numeric', month:'long', day:'numeric'});
          prepDay.textContent = `${dayName} - ${dateStr}`;
        }else{
          const info = todayInfoWithLocale(currentPack.locale);
          prepDay.textContent = `${info.dayName} - ${info.dateStr}`;
        }
      }

      // إعادة بناء التقويمات + تبويبات الشهور
      renderCalendars(lang);
      renderSideMonthTabs(lang);

      // عناوين جدول المصروفات حسب اللغة (اختياري)
      const ledgerHead = document.querySelectorAll('#ledgerTable thead th');
      if(ledgerHead.length === 6){
        if(lang==='ar'){
          ledgerHead[0].textContent = 'الرصيد';
          ledgerHead[1].textContent = 'viza';
          ledgerHead[2].textContent = 'walleti';
          ledgerHead[3].textContent = 'البند';
          ledgerHead[4].textContent = 'المصروف';
          ledgerHead[5].textContent = 'ملاحظات';
        }else{
          ledgerHead[0].textContent = 'Balance';
          ledgerHead[1].textContent = 'Card';
          ledgerHead[2].textContent = 'Wallet';
          ledgerHead[3].textContent = 'Item';
          ledgerHead[4].textContent = 'Expense';
          ledgerHead[5].textContent = 'Notes';
        }
      }

      saveLang(lang);
    }

    function switchLanguage(){
      const next = (currentLang === 'ar' ? 'en' : 'ar');
      applyLanguage(next);
    }

    /* =========================================================
       جدول المصروفات: توليد سطور فارغة
       ========================================================= */
    function buildLedgerRows(rows=24){
      const tb=document.querySelector('#ledgerTable tbody');
      tb.innerHTML='';
      for(let r=0; r<rows; r++){
        const tr=document.createElement('tr');
        for(let c=0;c<6;c++){ const td=document.createElement('td'); td.innerHTML='&nbsp;'; tr.appendChild(td); }
        tb.appendChild(tr);
      }
    }

    /* =========================================================
       تهيئة الصفحة + الروابط الداخلية
       ========================================================= */
    document.addEventListener('DOMContentLoaded', ()=>{
      // تعطيل التحضير اليومي خارج الأحد–الخميس
      const btnPrep=document.getElementById('btn-daily-prep');
      const infoDate = new Date();
      if(!isSunToThu(infoDate)){
        btnPrep.classList.add('disabled');
        btnPrep.setAttribute('aria-disabled','true');
        btnPrep.addEventListener('click',(e)=>{ e.preventDefault(); });
        btnPrep.title='يتاح من الأحد إلى الخميس فقط';
      }

      // الملاحظات: ورقة اليوم
      const todaySlip=document.getElementById('todaySlip');

      // التحضير: اليوم (صندوق صغير)
      const prepDay=document.getElementById('prep-day');

      // مهام: املأ أسطر افتراضية
      const personalTasks=document.getElementById('personalTasksList');
      const professionalTasks=document.getElementById('professionalTasksList');
      if(personalTasks) fillCheckboxLines(personalTasks, 18);
      if(professionalTasks) fillCheckboxLines(professionalTasks, 16);

      // المصروفات: سطور دفترية فارغة
      buildLedgerRows(24);

      // بطاقات التحضير (5)
      const prepCards=document.getElementById('prepCards');
      for(let i=0;i<5;i++){ const c=document.createElement('div'); c.className='draw-card'; setupDrawCard(c); prepCards.appendChild(c); }

      // بطاقات الأحد (10)
      const sundayCards=document.getElementById('sundayCards');
      for(let i=0;i<10;i++){ const c=document.createElement('div'); c.className='draw-card'; setupDrawCard(c); sundayCards.appendChild(c); }

      // لغة محفوظة أو افتراضيًا العربية
      applyLanguage(getSavedLang());

      // زر تبديل اللغة
      const toggleBtn = document.getElementById('langToggle');
      if(toggleBtn) toggleBtn.addEventListener('click', switchLanguage);

      // افتح/أغلق الصفحات بناءً على الرابط الداخلي
      window.addEventListener('hashchange', openFromHash);
      openFromHash();
    });

    /* ===== أحداث الأزرار للـ checkbox lists ===== */
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.btn');
      if(!btn) return;
      const addSel = btn.getAttribute('data-add-line');
      const clrSel = btn.getAttribute('data-clear-lines');
      if(addSel){
        const container = document.querySelector(addSel);
        if(container) addCheckboxLine(container);
      }else if(clrSel){
        const container = document.querySelector(clrSel);
        if(container) clearCheckboxLines(container);
      }
    });

  </script>
</body>
</html>
