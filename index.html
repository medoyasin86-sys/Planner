<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>MYH Elite Planner 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/vfs_fonts.js"></script>
    <style>
        :root { 
            --royal-blue: #0f172a; 
            --ruby: #9f1239; 
            --emerald: #065f46; 
            --gold: #b8860b; 
        }
        body { font-family: system-ui, sans-serif; background: #f1f5f9; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .setup-box { background: white; padding: 50px; border-radius: 30px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.2); text-align: center; border-bottom: 8px solid var(--gold); }
        .btn-gen { background: var(--royal-blue); color: var(--gold); border: 2px solid var(--gold); padding: 18px 50px; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 20px; transition: 0.4s; }
        .btn-gen:hover { background: var(--gold); color: white; transform: scale(1.05); }
        .status { margin-top: 20px; font-weight: bold; color: var(--emerald); }
    </style>
</head>
<body>

<div class="setup-box">
    <h1 style="color: var(--royal-blue); font-size: 32px;">MYH Elite Planner 2026</h1>
    <p style="color: #64748b;">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: ÙƒØ­Ù„ÙŠØŒ ÙŠØ§Ù‚ÙˆØªÙŠØŒ Ø²Ù…Ø±Ø¯ÙŠ (Ù†Ø³Ø®Ø© Ø¢ÙŠØ¨Ø§Ø¯ 10.2)</p>
    <input type="file" id="fontFile" accept=".ttf" style="margin: 25px 0;" />
    <br>
    <button class="btn-gen" id="genBtn">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ ğŸ“¥</button>
    <div id="status" class="status"></div>
</div>

<script>
    let fontB64 = "";
    document.getElementById('fontFile').onchange = (e) => {
        const reader = new FileReader();
        reader.onload = () => { 
            fontB64 = reader.result.split(',')[1]; 
            document.getElementById('status').innerText = "âœ… ØªÙ… Ø¯Ù…Ø¬ Ø§Ù„Ø®Ø· Ø§Ù„ÙØ§Ø®Ø±";
        };
        reader.readAsDataURL(e.target.files[0]);
    };

    const THEME = { 
        royal: "#0f172a", ruby: "#9f1239", emerald: "#064e3b", gold: "#b8860b", 
        bg: "#f8fafc", line: "#e2e8f0" 
    };

    function getSchedule() {
        let times = [];
        let start = new Date(); start.setHours(7, 35, 0);
        for(let i=1; i<=8; i++) {
            let end = new Date(start.getTime() + 40 * 60000);
            times.push(`${start.getHours()}:${start.getMinutes().toString().padStart(2,'0')} - ${end.getHours()}:${end.getMinutes().toString().padStart(2,'0')}`);
            if(i === 4) start = new Date(end.getTime() + 25 * 60000); 
            else start = new Date(end.getTime() + 5 * 60000);
        }
        return times;
    }

    document.getElementById('genBtn').onclick = () => {
        if(!fontB64) return alert("ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø®Ø· TTF Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªØ´ÙˆÙ‡ Ø§Ù„Ù†Øµ");
        document.getElementById('status').innerText = "â³ Ø¬Ø§Ø±ÙŠ ØµÙ‚Ù„ Ø§Ù„ØµÙØ­Ø§Øª ÙˆØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª...";

        pdfMake.vfs = { 'F.ttf': fontB64 };
        pdfMake.fonts = { MyFont: { normal: 'F.ttf', bold: 'F.ttf', italics: 'F.ttf' } };

        const schedule = getSchedule();
        let docContent = [];

        // 1. Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„ÙØ®Ù…
        docContent.push({
            stack: [
                { text: '2026', fontSize: 100, color: THEME.gold, bold: true, margin: [0, 150, 0, 0] },
                { text: 'Mr. Mo. Yasin', fontSize: 45, color: 'white', italics: true, margin: [0, 20] },
                { canvas: [{ type: 'line', x1: 200, y1: 0, x2: 400, y2: 0, lineWidth: 2, lineColor: THEME.gold }] },
                { text: 'ELITE PROFESSIONAL PLANNER', fontSize: 15, color: THEME.gold, margin: [0, 40], letterSpacing: 8 }
            ],
            fillColor: THEME.royal, alignment: 'center', pageBreak: 'after'
        });

        // 2. Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ
        docContent.push({
            id: 'main-index',
            padding: [40, 40],
            stack: [
                { text: 'Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø°ÙƒÙŠ', fontSize: 30, color: THEME.royal, margin: [0, 0, 0, 30], alignment: 'center' },
                {
                    table: {
                        widths: ['*', '*', '*'],
                        body: [
                            [{text: 'ÙŠÙ†Ø§ÙŠØ±', linkToDestination: 'm-0', style: 'idx'}, {text: 'ÙØ¨Ø±Ø§ÙŠØ±', linkToDestination: 'm-1', style: 'idx'}, {text: 'Ù…Ø§Ø±Ø³', linkToDestination: 'm-2', style: 'idx'}],
                            [{text: 'Ø£Ø¨Ø±ÙŠÙ„', linkToDestination: 'm-3', style: 'idx'}, {text: 'Ù…Ø§ÙŠÙˆ', linkToDestination: 'm-4', style: 'idx'}, {text: 'ÙŠÙˆÙ†ÙŠÙˆ', linkToDestination: 'm-5', style: 'idx'}],
                            [{text: 'ÙŠÙˆÙ„ÙŠÙˆ', linkToDestination: 'm-6', style: 'idx'}, {text: 'Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠ', style: 'idx', colSpan: 2}, '']
                        ]
                    }, layout: 'noBorders'
                }
            ], pageBreak: 'after'
        });

        let start = new Date(2026, 0, 1);
        let end = new Date(2026, 6, 31);

        for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
            let dateStr = d.toLocaleDateString('ar-OM', { weekday: 'long', day: 'numeric', month: 'long' });
            let pageId = d.getDate() === 1 ? { id: 'm-' + d.getMonth() } : {};

            // --- Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙŠÙ…ÙŠÙ† (Ø§Ù„Ø¹Ù…Ù„ - ÙŠØ§Ù‚ÙˆØªÙŠ) ---
            docContent.push({
                ...pageId,
                padding: [25, 20, 25, 20],
                stack: [
                    {
                        columns: [
                            { text: 'Mr. Mo. Yasin', fontSize: 22, color: THEME.gold, italics: true },
                            { text: dateStr, fontSize: 16, color: THEME.royal, bold: true, alignment: 'left' }
                        ]
                    },
                    { canvas: [{ type: 'line', x1: 0, y1: 5, x2: 520, y2: 5, lineWidth: 1.5, lineColor: THEME.ruby }] },
                    {
                        margin: [0, 15, 0, 0],
                        columns: [
                            {
                                width: '38%',
                                stack: [
                                    { text: 'Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ', color: THEME.ruby, bold: true, margin: [0, 5] },
                                    {
                                        table: {
                                            widths: ['*'],
                                            body: schedule.map(t => [{text: t, fontSize: 10, margin: [0, 6], color: THEME.royal}])
                                        }, layout: 'lightHorizontalLines'
                                    },
                                    { text: 'Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… Ø§Ù„Ø¹Ù…Ù„', color: THEME.ruby, bold: true, margin: [0, 15, 0, 5] },
                                    { table: { widths: [12, '*'], body: Array(6).fill([{text:''}, {text:'', margin:[0,6]}]) } }
                                ]
                            },
                            {
                                width: '62%', margin: [15, 0, 0, 0],
                                stack: [
                                    { text: 'Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± (Gems)', color: THEME.ruby, bold: true },
                                    ...Array(5).fill(0).map(() => ({
                                        margin: [0, 3, 0, 6],
                                        canvas: [{ type: 'rect', x: 0, y: 0, w: 310, h: 72, r: 8, lineColor: THEME.line, fillColor: '#fdfdfd' }]
                                    }))
                                ]
                            }
                        ]
                    }
                ], pageBreak: 'after'
            });

            // --- Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙŠØ³Ø§Ø± (Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª - Ø²Ù…Ø±Ø¯ÙŠ) ---
            docContent.push({
                padding: [25, 20, 25, 20],
                stack: [
                    {
                        columns: [
                            { text: 'Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª', fontSize: 18, color: THEME.emerald, bold: true },
                            { text: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙÙ‡Ø±Ø³', linkToDestination: 'main-index', fontSize: 10, color: THEME.ruby, alignment: 'left' }
                        ]
                    },
                    {
                        margin: [0, 15, 0, 0],
                        columns: [
                            {
                                width: '48%',
                                stack: [
                                    { text: 'Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø´Ø®ØµÙŠØ©', color: THEME.emerald, bold: true },
                                    { table: { widths: [15, '*'], body: Array(8).fill([{text:''}, {text:'', margin:[0,9]}]) } },
                                    { text: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙŠØ§Ù‚ÙˆØª', color: THEME.ruby, bold: true, margin:[0,15,0,5] },
                                    { canvas: [{ type: 'rect', x: 0, y: 0, w: 235, h: 140, r: 15, lineColor: THEME.line }] }
                                ]
                            },
                            {
                                width: '48%', margin: [15, 0, 0, 0],
                                stack: [
                                    { text: 'Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ… (Ø²Ù…Ø±Ø¯ÙŠ)', color: THEME.emerald, bold: true },
                                    { canvas: [{ type: 'rect', x: 0, y: 0, w: 235, h: 220, r: 10, lineColor: THEME.emerald, dash: {length: 3} }] },
                                    { text: 'Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ', color: THEME.emerald, bold: true, margin: [0, 15, 0, 5] },
                                    {
                                        table: {
                                            widths: ['*', 'auto', 'auto'],
                                            body: [
                                                [{text: 'Ø§Ù„Ø¨Ù†Ø¯', fillColor: THEME.emerald, color: 'white'}, {text: 'Ø¯Ø®Ù„', fillColor: THEME.emerald, color: 'white'}, {text: 'ØµØ±Ù', fillColor: THEME.emerald, color: 'white'}],
                                                ['', '', ''], ['', '', ''],
                                                [{text: 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ', bold: true}, {colSpan: 2, text: ''}]
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ], pageBreak: 'after'
            });

            // Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø®Øµ Ø´Ù‡Ø±ÙŠ Ø¹Ù†Ø¯ Ù†Ù‡Ø§ÙŠØ© ÙƒÙ„ Ø´Ù‡Ø±
            let nextDay = new Date(d); nextDay.setDate(d.getDate() + 1);
            if (nextDay.getMonth() !== d.getMonth()) {
                docContent.push({
                    padding: [40, 40],
                    stack: [
                        { text: `Ù…Ù„Ø®Øµ Ø­Ø³Ø§Ø¨Ø§Øª Ø´Ù‡Ø± ${d.toLocaleDateString('ar-OM', {month:'long'})}`, fontSize: 24, color: THEME.emerald, bold: true, alignment: 'center', margin: [0, 20] },
                        {
                            table: {
                                widths: ['*', '*', '*', '*'],
                                body: [
                                    [{text: 'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹', style: 'th'}, {text: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„', style: 'th'}, {text: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ', style: 'th'}, {text: 'Ø§Ù„ØµØ§ÙÙŠ', style: 'th'}],
                                    ['Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1', '', '', ''], ['Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2', '', '', ''], ['Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3', '', '', ''], ['Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4', '', '', ''],
                                    [{text: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ù‡Ø±', bold: true, fillColor: THEME.bg}, '', '', '']
                                ]
                            }
                        }
                    ], pageBreak: 'after'
                });
            }
        }

        const docDefinition = {
            pageSize: { width: 842, height: 595 },
            defaultStyle: { font: 'MyFont', alignment: 'right' },
            styles: {
                idx: { fontSize: 18, color: THEME.ruby, margin: [0, 15], decoration: 'underline' },
                th: { fillColor: THEME.royal, color: 'white', bold: true, alignment: 'center' }
            },
            content: docContent
        };

        pdfMake.createPdf(docDefinition).download('MYH_Elite_2026.pdf');
        document.getElementById('status').innerText = "âœ… ØªÙ… ØµÙŠØ§ØºØ© Ø§Ù„Ø¨Ù„Ø§Ù†Ø± Ø¨Ù†Ø¬Ø§Ø­! Ø§ÙØ¶Ù„Ù‡ Ø§Ù„Ø¢Ù† Ø¹Ù„Ù‰ GoodNotes";
    };
</script>

</body>
</html>
