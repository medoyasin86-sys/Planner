<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>MYH Paper-Scrap Elite Planner 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/vfs_fonts.js"></script>
    <style>
        :root { --royal: #0f172a; --ruby: #9f1239; --emerald: #064e3b; --gold: #b8860b; --paper: #fdfbf7; }
        body { font-family: system-ui, sans-serif; background: #e2e8f0; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .setup-box { background: white; padding: 50px; border-radius: 30px; text-align: center; border-bottom: 8px solid var(--gold); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .btn-gen { background: var(--royal); color: var(--gold); border: 2px solid var(--gold); padding: 18px 50px; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 20px; transition: 0.4s; }
        .btn-gen:hover { background: var(--gold); color: white; transform: scale(1.05); }
        .status { margin-top: 20px; color: var(--emerald); font-weight: bold; }
    </style>
</head>
<body>

<div class="setup-box">
    <h1 style="color: var(--royal);">MYH Master Scrapbook 2026</h1>
    <p>ØªØµÙ…ÙŠÙ… Ù‚ØµØ§ØµØ§Øª Ø§Ù„ÙˆØ±Ù‚ Ø§Ù„ÙØ§Ø®Ø±Ø© - Ø¢ÙŠØ¨Ø§Ø¯ 10.2</p>
    <input type="file" id="fontFile" accept=".ttf" style="margin: 25px 0;" />
    <br>
    <button class="btn-gen" id="genBtn">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ù„Ø§Ù†Ø± Ø§Ù„ÙˆØ±Ù‚ÙŠ ğŸ¨</button>
    <div id="status" class="status"></div>
</div>

<script>
    let fontB64 = "";
    document.getElementById('fontFile').onchange = (e) => {
        const reader = new FileReader();
        reader.onload = () => { fontB64 = reader.result.split(',')[1]; document.getElementById('status').innerText = "âœ… Ø§Ù„Ø®Ø· Ø¬Ø§Ù‡Ø²"; };
        reader.readAsDataURL(e.target.files[0]);
    };

    const THEME = { royal: "#0f172a", ruby: "#9f1239", emerald: "#064e3b", gold: "#b8860b", paper: "#fdfbf7", ink: "#334155" };
    const months = ["ÙŠÙ†Ø§ÙŠØ±", "ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ", "ÙŠÙˆÙ„ÙŠÙˆ"];

    function format12h(h, m) {
        const ampm = h >= 12 ? 'Ù…' : 'Øµ';
        h = h % 12 || 12;
        return `${h}:${m.toString().padStart(2, '0')} ${ampm}`;
    }

    function getSchedule12h() {
        let times = [];
        let start = new Date(); start.setHours(7, 35, 0);
        for(let i=1; i<=8; i++) {
            let sStr = format12h(start.getHours(), start.getMinutes());
            let end = new Date(start.getTime() + 40 * 60000);
            let eStr = format12h(end.getHours(), end.getMinutes());
            times.push(`${sStr} - ${eStr}`);
            if(i === 4) start = new Date(end.getTime() + 25 * 60000); 
            else start = new Date(end.getTime() + 5 * 60000);
        }
        return times;
    }

    // ÙˆØ¸ÙŠÙØ© Ù„Ø±Ø³Ù… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Side Tabs)
    function getSideTabs() {
        return {
            stack: months.map((m, i) => ({
                text: m, 
                linkToDestination: 'm-' + i, 
                fontSize: 9, 
                margin: [0, 5], 
                color: 'white', 
                fillColor: (i % 2 === 0 ? THEME.ruby : THEME.emerald),
                alignment: 'center'
            })),
            absolutePosition: { x: 805, y: 100 } // ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø£Ù‚ØµÙ‰ ÙŠÙ…ÙŠÙ† Ø§Ù„ØµÙØ­Ø©
        };
    }

    document.getElementById('genBtn').onclick = () => {
        if(!fontB64) return alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø· Ø£ÙˆÙ„Ø§Ù‹");
        document.getElementById('status').innerText = "â³ Ø¬Ø§Ø±ÙŠ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚ØµØ§ØµØ§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø·...";

        pdfMake.vfs = { 'F.ttf': fontB64 };
        pdfMake.fonts = { MyFont: { normal: 'F.ttf', bold: 'F.ttf', italics: 'F.ttf' } };

        const schedule = getSchedule12h();
        let docContent = [];

        // 1. Ø§Ù„ØºÙ„Ø§Ù
        docContent.push({
            stack: [
                { text: '2026', fontSize: 100, color: THEME.gold, bold: true, margin: [0, 150, 0, 0] },
                { text: 'Mr. Mo. Yasin', fontSize: 40, color: 'white', margin: [0, 10] },
                { text: 'PERSONAL SCRAPBOOK PLANNER', fontSize: 12, color: THEME.gold, letterSpacing: 5 }
            ],
            fillColor: THEME.royal, alignment: 'center', pageBreak: 'after'
        });

        let start = new Date(2026, 0, 1);
        let end = new Date(2026, 6, 31);

        for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
            let monthIdx = d.getMonth();
            let dateStr = d.toLocaleDateString('ar-OM', { weekday: 'long', day: 'numeric', month: 'long' });
            let pageId = d.getDate() === 1 ? { id: 'm-' + monthIdx } : {};

            // --- ØµÙØ­Ø© Ø§Ù„ÙŠÙ…ÙŠÙ†: Ø§Ù„Ø¹Ù…Ù„ (Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù‚ØµØ§ØµØ§Øª) ---
            docContent.push({
                ...pageId,
                background: [ { canvas: [{ type: 'rect', x: 20, y: 20, w: 780, h: 555, r: 10, fillColor: THEME.paper, lineColor: THEME.gold, lineWidth: 0.5 }] } ],
                padding: [40, 30, 60, 30],
                stack: [
                    getSideTabs(),
                    { columns: [ {text: 'Mr. Mo. Yasin', fontSize: 20, color: THEME.gold, italics: true}, {text: dateStr, style: 'dateTitle'} ] },
                    { margin: [0, 20], columns: [
                        {
                            width: '35%',
                            stack: [
                                { text: 'ğŸ“Œ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ (12h)', color: THEME.ruby, bold: true, margin: [0,0,0,10] },
                                { table: { widths: ['*'], body: schedule.map(t => [{text: t, fontSize: 9, margin: [0, 5], color: THEME.ink}]) }, layout: 'noBorders' }
                            ]
                        },
                        {
                            width: '60%', margin: [20, 0, 0, 0],
                            stack: [
                                { text: 'ğŸ“ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø°Ù‡Ù†ÙŠ', color: THEME.ruby, bold: true, margin:[0,0,0,10] },
                                ...Array(5).fill(0).map(() => ({
                                    margin: [0, 2, 0, 10],
                                    canvas: [{ type: 'rect', x: 0, y: 0, w: 280, h: 70, r: 5, fillColor: '#ffffff', lineColor: '#e2e8f0' }]
                                }))
                            ]
                        }
                    ]}
                ], pageBreak: 'after'
            });

            // --- ØµÙØ­Ø© Ø§Ù„ÙŠØ³Ø§Ø±: Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ---
            docContent.push({
                padding: [40, 30, 60, 30],
                stack: [
                    getSideTabs(),
                    { columns: [ {text: 'Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø²Ù…Ø±Ø¯ÙŠØ©', color: THEME.emerald, fontSize: 18, bold: true}, {text: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØºÙ„Ø§Ù', linkToDestination: 'm-0', fontSize: 9, color: THEME.ruby, alignment: 'left'} ] },
                    { margin: [0, 20], columns: [
                        {
                            width: '45%',
                            stack: [
                                { text: 'âœ… Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø´Ø®ØµÙŠØ©', color: THEME.emerald, bold: true },
                                { table: { widths: [15, '*'], body: Array(10).fill([{text:''}, {text:'', margin:[0,7]}]) }, layout: 'lightHorizontalLines' }
                            ]
                        },
                        {
                            width: '45%', margin: [20, 0, 0, 0],
                            stack: [
                                { text: 'ğŸ’° Ø­Ø³Ø§Ø¨Ø§Øª (Ù‚ØµØ§ØµØ© Ø²Ù…Ø±Ø¯ÙŠØ©)', color: THEME.emerald, bold: true },
                                { canvas: [{ type: 'rect', x: 0, y: 0, w: 200, h: 200, r: 10, fillColor: '#f0fdf4', lineColor: THEME.emerald, dash: {length: 2} }] },
                                { text: 'Ù…Ù„Ø®Øµ Ø§Ù„ØµØ±Ù Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ', color: THEME.emerald, bold: true, margin: [0, 15] },
                                { table: { widths: ['*', 'auto'], body: [['Ø§Ù„Ø¨Ù†Ø¯', 'Ø§Ù„Ù…Ø¨Ù„Øº'], ['', ''], ['', ''], [{text:'Ø§Ù„ØµØ§ÙÙŠ', bold:true}, '']] } }
                            ]
                        }
                    ]}
                ], pageBreak: 'after'
            });
        }

        const docDefinition = {
            pageSize: { width: 842, height: 595 },
            defaultStyle: { font: 'MyFont', alignment: 'right' },
            styles: {
                dateTitle: { fontSize: 16, color: THEME.royal, bold: true, alignment: 'left' }
            },
            content: docContent
        };

        pdfMake.createPdf(docDefinition).download('MYH_Scrapbook_12h_2026.pdf');
        document.getElementById('status').innerText = "âœ… Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„ØªØ­ÙØ© Ø§Ù„ÙÙ†ÙŠØ©! Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­Ù…ÙŠÙ„.";
    };
</script>

</body>
</html>
