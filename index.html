<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>MYH Elite Custom Planner 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/vfs_fonts.js"></script>
    <style>
        :root { --gold: #b8860b; --royal: #0f172a; }
        body { font-family: system-ui, sans-serif; background: #f4f7f6; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .setup-box { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; border-top: 5px solid var(--gold); }
        .upload-area { border: 2px dashed #cbd5e1; padding: 20px; border-radius: 10px; margin: 20px 0; background: #f8fafc; }
        .btn-gen { background: var(--royal); color: var(--gold); border: 2px solid var(--gold); padding: 12px 30px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; }
        .status { margin-top: 15px; color: #065f46; font-size: 14px; }
    </style>
</head>
<body>

<div class="setup-box">
    <h2 style="color: var(--royal);">Ø¨Ø±Ù…Ø¬Ø© ØªØµÙ…ÙŠÙ…Ùƒ Ø§Ù„Ø®Ø§Øµ (MYH 2026)</h2>
    <p>Ù‚Ù… Ø¨Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©) ÙˆØ§Ù„Ø®Ø· Ù„ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ù„Ø£Ø¬Ù†Ø¯Ø© ØªÙØ§Ø¹Ù„ÙŠØ©</p>
    
    <div class="upload-area">
        <label>1. Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© ØªØµÙ…ÙŠÙ…Ùƒ (JPG/PNG):</label><br>
        <input type="file" id="bgImg" accept="image/*" style="margin-top:10px" />
        <br><br>
        <label>2. Ø§Ø±ÙØ¹ Ø§Ù„Ø®Ø· (TTF):</label><br>
        <input type="file" id="fontFile" accept=".ttf" style="margin-top:10px" />
    </div>

    <button class="btn-gen" id="genBtn">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø¬Ù†Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© ğŸš€</button>
    <div id="status" class="status"></div>
</div>

<script>
    let fontB64 = "";
    let bgB64 = "";

    // Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
    document.getElementById('bgImg').onchange = (e) => {
        const reader = new FileReader();
        reader.onload = () => { bgB64 = reader.result; document.getElementById('status').innerText = "âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªØµÙ…ÙŠÙ…"; };
        reader.readAsDataURL(e.target.files[0]);
    };

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø®Ø·
    document.getElementById('fontFile').onchange = (e) => {
        const reader = new FileReader();
        reader.onload = () => { fontB64 = reader.result.split(',')[1]; };
        reader.readAsDataURL(e.target.files[0]);
    };

    document.getElementById('genBtn').onclick = () => {
        if(!bgB64 || !fontB64) return alert("ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø®Ø· Ø£ÙˆÙ„Ø§Ù‹");
        
        document.getElementById('status').innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØµÙØ­Ø§Øª ÙˆØ±Ø¨Ø· Ø§Ù„Ø±ÙˆØ§Ø¨Ø·...";

        pdfMake.vfs = { 'F.ttf': fontB64 };
        pdfMake.fonts = { MyFont: { normal: 'F.ttf', bold: 'F.ttf', italics: 'F.ttf' } };

        let docContent = [];
        const months = ["ÙŠÙ†Ø§ÙŠØ±", "ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ", "ÙŠÙˆÙ„ÙŠÙˆ"];

        // Ø­Ù„Ù‚Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø´Ù‡ÙˆØ± (Ù…Ù† ÙŠÙ†Ø§ÙŠØ± Ø¥Ù„Ù‰ ÙŠÙˆÙ„ÙŠÙˆ)
        for(let m=0; m<7; m++) {
            let daysInMonth = new Date(2026, m+1, 0).getDate();
            
            for(let d=1; d<=daysInMonth; d++) {
                let dateObj = new Date(2026, m, d);
                let dateStr = dateObj.toLocaleDateString('ar-OM', { weekday: 'long', day: 'numeric', month: 'long' });

                docContent.push({
                    // ÙˆØ¶Ø¹ ØªØµÙ…ÙŠÙ…Ùƒ ÙƒØ®Ù„ÙÙŠØ© Ù„Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
                    background: [
                        { image: bgB64, width: 595, height: 842 } // Ù…Ù‚Ø§Ø³ A4 Portrait
                    ],
                    padding: [40, 40, 40, 40],
                    stack: [
                        // Ø·Ø¨Ù‚Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (ÙÙˆÙ‚ Ø§Ù„ØªØµÙ…ÙŠÙ…)
                        {
                            absolutePosition: { x: 550, y: 150 },
                            stack: months.map((monthName, idx) => ({
                                text: ' ', // Ù…Ø³Ø§Ø­Ø© Ø´ÙØ§ÙØ© Ù„Ù„Ù†Ù‚Ø±
                                margin: [0, 5],
                                canvas: [{ type: 'rect', x: 0, y: 0, w: 30, h: 40, color: 'white', fillOpacity: 0 }],
                                linkToDestination: 'month-' + idx
                            }))
                        },
                        // ÙƒØªØ§Ø¨Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙŠÙˆÙ… ÙÙŠ Ù…ÙƒØ§Ù† Ù…Ø®ØµØµ (ØªØ¹Ø¯Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø­Ø³Ø¨ ØªØµÙ…ÙŠÙ…Ùƒ)
                        { 
                            text: dateStr, 
                            absolutePosition: { x: 100, y: 55 }, 
                            fontSize: 18, color: '#0f172a', bold: true 
                        },
                        // Ø§Ø³Ù…Ùƒ Ø¨Ø´ÙƒÙ„ Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠ
                        {
                            text: 'Mr. Mo. Yasin',
                            absolutePosition: { x: 420, y: 35 },
                            fontSize: 16, italics: true, color: '#b8860b'
                        }
                    ],
                    id: d === 1 ? 'month-' + m : null,
                    pageBreak: 'after'
                });
            }
        }

        const docDefinition = {
            pageSize: 'A4',
            defaultStyle: { font: 'MyFont' },
            content: docContent
        };

        pdfMake.createPdf(docDefinition).download('MYH_Custom_Interactive_2026.pdf');
        document.getElementById('status').innerText = "âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­Ù…ÙŠÙ„!";
    };
</script>
</body>
</html>
